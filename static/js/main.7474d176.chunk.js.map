{"version":3,"sources":["reducers/filesReducer.js","actions/types.js","reducers/uiReducer.js","reducers/errorReducer.js","reducers/lettersReducer.js","reducers/index.js","components/letters/LetterItem/index.js","utils/formatDate.js","components/letters/LettersContainer/index.js","components/form/FileInput/index.js","actions/fileActions.js","actions/uiActions.js","components/MessageStatus/index.js","components/form/EmailInput/index.js","components/form/SubjectInput/index.js","components/form/MessageInput/index.js","components/form/AttachFilesButton/index.js","components/form/FileList/FileListItem.js","components/form/FileList/FileListContainer.js","actions/formActions.js","components/form/FormContainer/index.js","storage/utils.js","components/MainWrapper/index.js","App.js","index.js"],"names":["initialState","filesReducer","state","arguments","length","undefined","action","newState","Object","toConsumableArray","type","push","payload","splice","isFileDndDisplayed","lettersLoading","isLetterSend","uiReducer","objectSpread","email","errorReducer","file","form","lettersReducer","combineReducers","test","reducer","files","ui","error","letters","LetterItem","_ref","letter","date","result","month","split","formatDate","react_default","a","createElement","className","subject","status","connect","loading","renderContent","map","index","letters_LetterItem","key","isDisplayed","fileError","addFile","dispatch","fileName","name","size","newFile","encoding","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","then","content","catch","err","console","log","closeDnd","cn","file-input_displayed","file-input","onDrop","event","preventDefault","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","dataTransfer","Symbol","iterator","next","done","value","return","onDragOver","onClick","index_esm","window","location","reload","EmailInput","label","person","Field","component","concat","id","placeholder","SubjectInput","MessageInput","openDnd","removeFile","FileList_FileListItem","keys","validateFormFields","formValues","errors","_i","_keys","trim","validator","isEmail","from_email","isEmpty","from_name","to_email","to_name","message","summSize","validateFilesSize","isValid","formConnected","reduxForm","handleSubmit","submitForm","formError","reset","onSubmit","noValidate","form_EmailInput","form_SubjectInput","form_MessageInput","FileList_FileListContainer","form_AttachFilesButton","getState","_validateFormFields","payloadFiles","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","from.name","from.email","to.name","text","attaches","sendwhen","mca","sendsay","Sendsay","auth","login","password","request","res","item","localStorage","JSON","parse","setItem","stringify","addStorageItem","components_MessageStatus","form_FormContainer","form_FileInput","letters_LettersContainer","middleware","thunk","store","createStore","reducers","compose","applyMiddleware","apply","App_loop","session","obj","dt","App","es","components_MainWrapper","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.7474d176.chunk.js","sourcesContent":["import { ADD_FILE, REMOVE_FILE } from \"../actions/types\";\r\n\r\nconst initialState = [];\r\n\r\nconst filesReducer = (state = initialState, action) => {\r\n  const newState = [...state];\r\n  switch (action.type) {\r\n    case ADD_FILE:\r\n      newState.push(action.payload);\r\n      return newState;\r\n    case REMOVE_FILE:\r\n      newState.splice(action.payload, 1);\r\n      return newState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default filesReducer;\r\n","//Files types;\r\nexport const ADD_FILE = \"ADD_FILE\";\r\nexport const REMOVE_FILE = \"REMOVE_FILE\";\r\n\r\n//Error types\r\nexport const FILE_ERROR = \"FILE_ERROR\";\r\nexport const VALIDATION_ERROR = \"VALIDATION_ERROR\";\r\nexport const CLEAR_ERROR = \"CLEAR_ERROR\";\r\n\r\n//Ui types\r\nexport const OPEN_FILE_DND = \"OPEN_FILE_DND\";\r\nexport const CLOSE_FILE_DND = \"CLOSE_FILE_DND\";\r\nexport const LETTER_SEND = \"LETTER_SEND\";\r\n\r\n//letters types\r\nexport const GET_LETTERS = \"GET_LETTERS\";\r\nexport const ADD_LETTER = \"ADD_LETTER\";\r\nexport const LETTERS_LOADING = \"LETTERS_LOADING\";\r\n","import {\r\n  OPEN_FILE_DND,\r\n  CLOSE_FILE_DND,\r\n  LETTERS_LOADING,\r\n  ADD_LETTER,\r\n  LETTER_SEND\r\n} from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  isFileDndDisplayed: false,\r\n  lettersLoading: false,\r\n  isLetterSend: false\r\n};\r\n\r\nconst uiReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case OPEN_FILE_DND:\r\n      return { isFileDndDisplayed: true };\r\n    case CLOSE_FILE_DND:\r\n      return { isFileDndDisplayed: false };\r\n    case LETTERS_LOADING:\r\n      return { ...state, lettersLoading: true };\r\n    case ADD_LETTER:\r\n      return { ...state, lettersLoading: false };\r\n    case LETTER_SEND:\r\n      return { ...state, isLetterSend: true, email: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default uiReducer;\r\n","import {\r\n  FILE_ERROR,\r\n  CLOSE_FILE_DND,\r\n  VALIDATION_ERROR,\r\n  CLEAR_ERROR\r\n} from \"../actions/types\";\r\n\r\nconst initialState = {};\r\n\r\nconst errorReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case FILE_ERROR:\r\n      return { ...state, file: action.payload };\r\n    case CLOSE_FILE_DND:\r\n      const newState = { ...state };\r\n      delete newState.file;\r\n      return newState;\r\n    case VALIDATION_ERROR:\r\n      return { ...state, form: action.payload };\r\n    case CLEAR_ERROR:\r\n      return {};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default errorReducer;\r\n","import { GET_LETTERS, ADD_LETTER } from \"../actions/types\";\r\n\r\nconst initialState = [];\r\n\r\nconst lettersReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case GET_LETTERS:\r\n      return action.payload;\r\n    case ADD_LETTER:\r\n      const newState = [...state];\r\n      newState.push(action.payload);\r\n      return newState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default lettersReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport { reducer } from \"redux-form\";\r\n\r\nimport filesReducer from \"./filesReducer\";\r\nimport uiReducer from \"./uiReducer\";\r\nimport errorReducer from \"./errorReducer\";\r\nimport lettersReducer from \"./lettersReducer\";\r\n\r\nexport default combineReducers({\r\n  test: () => 5,\r\n  form: reducer,\r\n  files: filesReducer,\r\n  ui: uiReducer,\r\n  error: errorReducer,\r\n  letters: lettersReducer\r\n});\r\n","import React from \"react\";\r\n\r\nimport { formatDate } from \"../../../utils/formatDate\";\r\nimport \"./LetterItem.css\";\r\n\r\nconst LetterItem = ({ letter }) => {\r\n  const date = formatDate(letter.date);\r\n  return (\r\n    <tr className=\"letters-item\">\r\n      <th className=\"letter-item__column\">{date}</th>\r\n      <th className=\"letter-item__column\">{letter.subject}</th>\r\n      {letter.status === \"-1\" ? (\r\n        <th className=\"letter-item__column_success\">Отправлено</th>\r\n      ) : letter.status < -1 ? (\r\n        <th className=\"letter-item__column_fail\">Ошибка</th>\r\n      ) : (\r\n        <th className=\"letter-item__column_await\">В очереди</th>\r\n      )}\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default LetterItem;\r\n","export const formatDate = date => {\r\n  let result = \"\";\r\n\r\n  const month = date.split(\"-\")[1];\r\n  const day = date.split(\"-\")[2].split(\" \")[0];\r\n\r\n  result += day + \" \";\r\n\r\n  switch (month) {\r\n    case \"01\":\r\n      result += \"января\";\r\n      return result;\r\n    case \"02\":\r\n      result += \"февраля\";\r\n      return result;\r\n    case \"03\":\r\n      result += \"марта\";\r\n      return result;\r\n    case \"04\":\r\n      result += \"апреля\";\r\n      return result;\r\n    case \"05\":\r\n      result += \"мая\";\r\n      return result;\r\n    case \"06\":\r\n      result += \"июня\";\r\n      return result;\r\n    case \"07\":\r\n      result += \"июля\";\r\n      return result;\r\n    case \"08\":\r\n      result += \"августа\";\r\n      return result;\r\n    case \"09\":\r\n      result += \"сентября\";\r\n      return result;\r\n    case \"10\":\r\n      result += \"октября\";\r\n      return result;\r\n    case \"11\":\r\n      result += \"ноября\";\r\n      return result;\r\n    case \"12\":\r\n      result += \"декабря\";\r\n      return result;\r\n    default:\r\n      return result;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport LetterItem from \"../LetterItem\";\r\nimport \"./LettersContainer.css\";\r\n\r\nconst LettersContainer = ({ letters, loading }) => {\r\n  const renderContent = loading ? (\r\n    <p>Подождите, сейчас мы загрузим ваши сообщения</p>\r\n  ) : letters.length > 0 ? (\r\n    <table className=\"letters-table\">\r\n      <thead>\r\n        <tr className=\"letters-header\">\r\n          <th className=\"letters-header__date-column\">Дата</th>\r\n          <th className=\"letters-header__subject-column\">Тема</th>\r\n          <th className=\"letters-header__status-column\">Статус</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {letters.map((letter, index) => (\r\n          <LetterItem letter={letter} key={index} />\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  ) : (\r\n    <p>Сообщения еще не отправляллись</p>\r\n  );\r\n  return (\r\n    <div className=\"letters-container\">\r\n      <h1 className=\"letters-container__header\">Отправленные сообщения</h1>\r\n      {renderContent}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  letters: state.letters,\r\n  loading: state.ui.lettersLoading\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {}\r\n)(LettersContainer);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport cn from \"classnames\";\r\nimport { FaTimes } from \"react-icons/fa\";\r\n\r\nimport \"./FileInput.css\";\r\nimport { addFile } from \"../../../actions/fileActions\";\r\nimport { closeDnd } from \"../../../actions/uiActions\";\r\n\r\nconst FileInput = ({ addFile, isDisplayed, closeDnd, fileError }) => {\r\n  return (\r\n    <div\r\n      className={cn({\r\n        \"file-input_displayed\": isDisplayed,\r\n        \"file-input\": !isDisplayed\r\n      })}\r\n      onDrop={event => {\r\n        event.preventDefault();\r\n        for (let file of event.dataTransfer.files) {\r\n          addFile(file);\r\n        }\r\n      }}\r\n      onDragOver={event => {\r\n        event.preventDefault();\r\n      }}\r\n    >\r\n      <h1 className=\"file-input__header\">Бросайте файлы сюда, я ловлю</h1>\r\n      <p className=\"file-input__text\">\r\n        Мы принимаем картинки (jpg, png, gif), офисные файлы(doc, xls, pdf) и\r\n        zip-архивы.\r\n      </p>\r\n      <p className=\"file-input__text\">Размеры файла до 5 МБ</p>\r\n      <p className=\"file-input__error-display\">{fileError}</p>\r\n      <div className=\"file-input__btn-close\" onClick={closeDnd}>\r\n        <FaTimes />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  isDisplayed: state.ui.isFileDndDisplayed,\r\n  fileError: state.error.file\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { addFile, closeDnd }\r\n)(FileInput);\r\n","import { ADD_FILE, REMOVE_FILE, FILE_ERROR, CLOSE_FILE_DND } from \"./types\";\r\n\r\nconst validateFileExtension = fileName => {\r\n  return !/^(.*\\.(?!(jpg|gif|png|doc|xls|pdf|zip)$))?[^.]*$/i.test(fileName);\r\n};\r\n\r\nconst validateFileSize = fileSize => {\r\n  return fileSize < 5000000 ? true : false;\r\n};\r\n\r\nexport const addFile = file => dispatch => {\r\n  //Check if file extension matches allowed file types\r\n  if (!validateFileExtension(file.name)) {\r\n    return dispatch({ type: FILE_ERROR, payload: \"Неподходящий тип файла\" });\r\n  }\r\n\r\n  //Check if file size exceeds 5 Mb\r\n  if (!validateFileSize(file.size)) {\r\n    return dispatch({\r\n      type: FILE_ERROR,\r\n      payload: \"Размер файла не должен превышать 5Mb\"\r\n    });\r\n  }\r\n\r\n  const newFile = { name: file.name, encoding: \"base64\", size: file.size };\r\n\r\n  new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = () => reject(reader.error);\r\n  })\r\n    .then(result => {\r\n      //Add new file to store, close find dnd\r\n      dispatch({ type: CLOSE_FILE_DND });\r\n      dispatch({ type: ADD_FILE, payload: { ...newFile, content: result } });\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\nexport const removeFile = index => {\r\n  return { type: REMOVE_FILE, payload: index };\r\n};\r\n","import { OPEN_FILE_DND, CLOSE_FILE_DND } from \"./types\";\r\n\r\nexport const openDnd = () => ({ type: OPEN_FILE_DND });\r\nexport const closeDnd = () => ({ type: CLOSE_FILE_DND });\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { FaRedoAlt } from \"react-icons/fa\";\r\n\r\nimport \"./MessageStatus.css\";\r\n\r\nconst MessageStatus = ({ email }) => {\r\n  return (\r\n    <div className=\"message-status\">\r\n      <h1>Сообщение поставлено в очередь на отправку</h1>\r\n      <p>\r\n        Совсем скоро сообщение вылетит из сервера, и будет двигаться в сторону\r\n        почты получателя «{email}» со скоростью электронов.\r\n      </p>\r\n      <button\r\n        className=\"message-status__btn-reload\"\r\n        onClick={() => window.location.reload()}\r\n      >\r\n        <FaRedoAlt />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({ email: state.ui.email });\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {}\r\n)(MessageStatus);\r\n","import React from \"react\";\r\nimport { Field } from \"redux-form\";\r\n\r\nimport \"./EmailInput.css\";\r\n\r\n/* Field name is passed as from_name/to_name\r\nso reduxForm wond treat form fiels from.name and to.name \r\nas object properties */\r\nconst EmailInput = ({ label, person, error }) => {\r\n  return (\r\n    <div className=\"email-input\">\r\n      <label className=\"email-input__label\">{label}</label>\r\n      <Field\r\n        component=\"input\"\r\n        type=\"text\"\r\n        name={`${person}_name`}\r\n        id={`${person}_name`}\r\n        className=\"email-input__field_left\"\r\n        placeholder=\"Имя\"\r\n      />\r\n      <Field\r\n        component=\"input\"\r\n        type=\"email\"\r\n        name={`${person}_email`}\r\n        id={`${person}_email`}\r\n        className=\"email-input__field_right\"\r\n        placeholder=\"Email\"\r\n      />\r\n      <div className=\"email-error\">\r\n        {error.name ? (\r\n          <div className=\"email-error__name\">{error.name}</div>\r\n        ) : null}\r\n        {error.email ? (\r\n          <div className=\"email-error__email\">{error.email}</div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailInput;\r\n","import React from \"react\";\r\nimport { Field } from \"redux-form\";\r\n\r\nimport \"./SubjectInput.css\";\r\n\r\nconst SubjectInput = ({ label, error }) => {\r\n  return (\r\n    <div className=\"subject-input\">\r\n      <label className=\"subject-input__label\">{label}</label>\r\n      <Field\r\n        className=\"subject-input__field\"\r\n        component=\"input\"\r\n        type=\"text\"\r\n        name=\"subject\"\r\n        placeholder=\"Тема письма\"\r\n        id=\"subject\"\r\n      />\r\n      {error ? (\r\n        <div className=\"subject-input__error-display\">{error}</div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubjectInput;\r\n","import React from \"react\";\r\nimport { Field } from \"redux-form\";\r\n\r\nimport \"./MessageInput.css\";\r\n\r\nconst MessageInput = ({ label, error }) => {\r\n  return (\r\n    <div className=\"message-input\">\r\n      <label className=\"message-input__label\">{label}</label>\r\n      <Field\r\n        className=\"message-input__field\"\r\n        component=\"textarea\"\r\n        name=\"message\"\r\n        placeholder=\"Текст сообщения\"\r\n        id=\"message\"\r\n      />\r\n      {error ? (\r\n        <div className=\"message-input__error-display\">{error}</div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageInput;\r\n","import React from \"react\";\r\nimport { FaPaperclip } from \"react-icons/fa\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./AttachFilesButton.css\";\r\nimport { openDnd } from \"../../../actions/uiActions\";\r\n\r\nconst AttachFilesButton = ({ openDnd }) => {\r\n  return (\r\n    <button className=\"attach-files-btn\" type=\"button\" onClick={openDnd}>\r\n      <FaPaperclip />\r\n      Прикрепить файлы\r\n    </button>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { openDnd }\r\n)(AttachFilesButton);\r\n","import React from \"react\";\r\nimport { FaPaperclip, FaTrashAlt } from \"react-icons/fa\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./FileList.css\";\r\nimport { removeFile } from \"../../../actions/fileActions\";\r\n\r\nconst FileListItem = ({ file, removeFile, index }) => {\r\n  return (\r\n    <div className=\"file-list__item\">\r\n      <div>\r\n        <FaPaperclip size=\"24\" />\r\n      </div>\r\n      <span>{file.name}</span>\r\n      <button type=\"button\" onClick={() => removeFile(index)}>\r\n        <FaTrashAlt /> Удалить\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  { removeFile }\r\n)(FileListItem);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport FileListItem from \"./FileListItem\";\r\nimport \"./FileList.css\";\r\n\r\nconst FileListContainer = ({ files }) => {\r\n  return (\r\n    <div className=\"file-list\">\r\n      {files.map((file, index) => (\r\n        <FileListItem file={file} key={index} index={index} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({ files: state.files });\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {}\r\n)(FileListContainer);\r\n","import validator from \"validator\";\r\n\r\nimport { VALIDATION_ERROR, CLEAR_ERROR, LETTER_SEND } from \"./types\";\r\nimport { addStorageItem } from \"../storage/utils\";\r\n\r\n//Form keys\r\nconst keys = [\r\n  \"from_email\",\r\n  \"from_name\",\r\n  \"to_email\",\r\n  \"to_name\",\r\n  \"subject\",\r\n  \"message\"\r\n];\r\n\r\n//Util function to check if value is empty\r\nconst isEmpty = value =>\r\n  value === undefined ||\r\n  value === null ||\r\n  (typeof value === \"object\" && Object.keys(value).length === 0) ||\r\n  (typeof value === \"string\" && value.trim().length === 0);\r\n\r\n//Checking if file size exceeds 20 Mb\r\nconst validateFilesSize = files => {\r\n  let summSize = 0;\r\n  for (let file of files) {\r\n    summSize += file.size;\r\n  }\r\n  return summSize <= 20000000 ? true : false;\r\n};\r\n\r\nconst validateFormFields = (formValues, files) => {\r\n  const errors = {};\r\n\r\n  //Convert values to empty strings to use validator\r\n  for (let key of keys) {\r\n    formValues[key] = isEmpty(formValues[key]) ? \"\" : formValues[key];\r\n  }\r\n\r\n  if (!validator.isEmail(formValues.from_email)) {\r\n    errors.from_email = \"Некорректный email\";\r\n  }\r\n\r\n  if (validator.isEmpty(formValues.from_email)) {\r\n    errors.from_email = \"Email не может быть пустым\";\r\n  }\r\n\r\n  if (validator.isEmpty(formValues.from_name)) {\r\n    errors.from_name = \"Имя не может быть пустым\";\r\n  }\r\n\r\n  if (!validator.isEmail(formValues.to_email)) {\r\n    errors.to_email = \"Некорректный email\";\r\n  }\r\n\r\n  if (validator.isEmpty(formValues.to_email)) {\r\n    errors.to_email = \"Email не может быть пустым\";\r\n  }\r\n\r\n  if (validator.isEmpty(formValues.to_name)) {\r\n    errors.to_name = \"Имя не может быть пустым\";\r\n  }\r\n\r\n  if (validator.isEmpty(formValues.subject)) {\r\n    errors.subject = \"Тема не может быть пустой\";\r\n  }\r\n\r\n  if (validator.isEmpty(formValues.message)) {\r\n    errors.message = \"Напишите, пожалуйста, хоть что-нибудь\";\r\n  }\r\n\r\n  if (!validateFilesSize(files)) {\r\n    errors.files = \"Размер файлов не должен превышать 20 Mb\";\r\n  }\r\n\r\n  const isValid = Object.keys(errors).length === 0 ? true : false;\r\n  return { errors, isValid };\r\n};\r\n\r\nexport const submitForm = (formValues, reset) => (dispatch, getState) => {\r\n  const files = getState().files;\r\n\r\n  //Validate input\r\n  const { errors, isValid } = validateFormFields(formValues, files);\r\n  if (!isValid) {\r\n    return dispatch({ type: VALIDATION_ERROR, payload: errors });\r\n  }\r\n\r\n  //Clear possible remaining errors\r\n  dispatch({ type: CLEAR_ERROR });\r\n\r\n  //Format files\r\n  const payloadFiles = [];\r\n  for (let file of files) {\r\n    payloadFiles.push({\r\n      name: file.name,\r\n      content: file.content,\r\n      encoding: file.encoding\r\n    });\r\n  }\r\n\r\n  const payload = {\r\n    action: \"issue.send.test\",\r\n    letter: {\r\n      subject: formValues.subject,\r\n      \"from.name\": formValues.from_name,\r\n      \"from.email\": formValues.from_email,\r\n      \"to.name\": formValues.to_name,\r\n      message: { text: formValues.message },\r\n      attaches: payloadFiles\r\n    },\r\n    sendwhen: \"test\",\r\n    mca: [formValues.to_email]\r\n  };\r\n\r\n  const sendsay = new window.Sendsay({\r\n    auth: {\r\n      login: \"daniil2305@yandex.ru\",\r\n      password: \"xoo4Yav\"\r\n    }\r\n  });\r\n\r\n  dispatch({ type: LETTER_SEND, payload: formValues.to_email });\r\n  sendsay\r\n    .request(payload)\r\n    .then(res => addStorageItem({ ...res, subject: formValues.subject }))\r\n    .catch(err => console.log(err));\r\n};\r\n","import React from \"react\";\r\nimport { reduxForm } from \"redux-form\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./FormContainer.css\";\r\nimport EmailInput from \"../EmailInput\";\r\nimport SubjectInput from \"../SubjectInput\";\r\nimport MessageInput from \"../MessageInput\";\r\nimport AttachFilesButton from \"../AttachFilesButton\";\r\nimport FileListContainer from \"../FileList/FileListContainer\";\r\nimport { submitForm } from \"../../../actions/formActions\";\r\n\r\nconst FormContainer = ({\r\n  handleSubmit,\r\n  submitForm,\r\n  formError,\r\n  reset,\r\n  size\r\n}) => {\r\n  return (\r\n    <form\r\n      className=\"main-form\"\r\n      onSubmit={handleSubmit(formValues => {\r\n        submitForm(formValues);\r\n      })}\r\n      noValidate\r\n    >\r\n      <h1 className=\"main-form__header\">Отправлялка сообщений</h1>\r\n      <EmailInput\r\n        label=\"От кого\"\r\n        person=\"from\"\r\n        error={{ name: formError.from_name, email: formError.from_email }}\r\n      />\r\n      <EmailInput\r\n        label=\"Кому\"\r\n        person=\"to\"\r\n        error={{ name: formError.to_name, email: formError.to_email }}\r\n      />\r\n      <SubjectInput label=\"Тема письма\" error={formError.subject} />\r\n      <MessageInput label=\"Сообщение\" error={formError.message} />\r\n      <FileListContainer />\r\n      <AttachFilesButton />\r\n      {formError.files ? (\r\n        <div className=\"main-form__file-size-error\">\r\n          Суммарный размер файлов не должен превышать 20 Mb\r\n        </div>\r\n      ) : null}\r\n      <button className=\"main-form__btn-submit\">Отправить</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst formConnected = reduxForm({ form: \"main-form\" })(FormContainer);\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    formError: state.error.form ? state.error.form : {}\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { submitForm }\r\n)(formConnected);\r\n","export const addStorageItem = item => {\r\n  if (!localStorage.letters) {\r\n    localStorage.setItem(\"letters\", JSON.stringify([item]));\r\n  } else {\r\n    const letters = JSON.parse(localStorage.letters);\r\n    letters.push(item);\r\n    localStorage.setItem(\"letters\", JSON.stringify(letters));\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport LettersContainer from \"../letters/LettersContainer\";\r\nimport FileInput from \"../form/FileInput\";\r\nimport MessageStatus from \"../MessageStatus\";\r\nimport FormContainer from \"../form/FormContainer\";\r\n\r\nconst MainWrapper = ({ isLetterSend }) => {\r\n  return (\r\n    <div>\r\n      {isLetterSend ? (\r\n        <div className=\"main-wrapper\">\r\n          <MessageStatus />\r\n        </div>\r\n      ) : (\r\n        <div className=\"main-wrapper\">\r\n          <FormContainer />\r\n          <FileInput />\r\n        </div>\r\n      )}\r\n      <LettersContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({ isLetterSend: state.ui.isLetterSend });\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {}\r\n)(MainWrapper);\r\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\n\nimport reducers from \"./reducers\";\nimport { ADD_LETTER, LETTERS_LOADING } from \"./actions/types\";\nimport MainWrapper from \"./components/MainWrapper\";\n\nconst middleware = [thunk];\nconst store = createStore(reducers, compose(applyMiddleware(...middleware)));\n\n//If any letters in local storage\n//Send requests to check letters status\nif (localStorage.letters) {\n  const sendsay = new window.Sendsay({\n    auth: {\n      login: \"daniil2305@yandex.ru\",\n      password: \"xoo4Yav\"\n    }\n  });\n\n  store.dispatch({ type: LETTERS_LOADING });\n  const letters = JSON.parse(localStorage.letters);\n  for (let letter of letters) {\n    sendsay\n      .request({\n        action: \"track.get\",\n        id: letter[\"track.id\"],\n        session: \"session\"\n      })\n      .then(res => {\n        store.dispatch({\n          type: ADD_LETTER,\n          payload: {\n            date: res.obj.dt,\n            subject: letter.subject,\n            status: res.obj.status\n          }\n        });\n      });\n  }\n}\n\nconst App = () => {\n  return (\n    <Provider store={store}>\n      <MainWrapper />\n    </Provider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}